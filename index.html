<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Baby Sleep Tracker</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico">

  <!-- PWA Meta + Icons -->
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./sleep.png" />
  <meta name="theme-color" content="#6ab7ff" />
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>ğŸ¼ Baby Sleep Tracker</h1>
  </header>

  <div class="theme-toggle">
    <label>
      <input type="checkbox" id="darkToggle" onchange="toggleDarkMode()" />
      ğŸŒ™ Dark Mode
    </label>
  </div>

  <main id="main-ui">
    <div class="buttons">
      <button onclick="startSleep()">ğŸ’¤ Start Sleep</button>
      <button onclick="endSleep()">ğŸ‘» End Sleep</button>
      <button onclick="showToday()">ğŸ—“ï¸ Todayâ€™s Summary</button>
      <button onclick="showAll()">ğŸ“Š All Sessions</button>
      <!-- <button onclick="copySummary()">ğŸ“‹ Copy Summary</button> -->
      <button onclick="exportToExcel()">ğŸ’¾ Export to Excel</button>
      <button onclick="showChart()">ğŸ“ˆ Visual Summary</button>
    </div>

    <div class="date-search">
      <input type="date" id="date-input" />
      <button onclick="searchByDate()">ğŸ” Search</button>
    </div>
  </main>

  <section id="log-output" class="hidden">
    <button id="copy-summary-btn" onclick="copySummary()">ğŸ“‹ Copy Summary</button>
    <pre id="summary-text"></pre>
  </section>
  

  <div id="chart-section" class="hidden chart-container">
    <canvas id="barChart"></canvas>
    <canvas id="typePieChart"></canvas>
    <canvas id="lineChart"></canvas>
    <canvas id="feedStackedChart"></canvas>
  </div>

  <div id="back-button" class="hidden">
    <button onclick="returnToMain()">ğŸ”™ Back to Tracker</button>
  </div>

  <footer>
    <p>Â© 2025 Baby Sleep Tracker</p>
    <p>Â© ğŸƒ POCO_dev</p>
  </footer>

  <!-- SheetJS Excel support -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="./script.js"></script>

  <!-- Register service worker -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("âœ… Service Worker Registered"))
        .catch(err => console.log("âŒ Service Worker Failed", err));
    }
    </script>
</body>
</html>
